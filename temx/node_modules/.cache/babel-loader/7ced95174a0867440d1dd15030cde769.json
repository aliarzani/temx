{"ast":null,"code":"import _defineProperty from \"/workspaces/codespaces-blank/baseapp-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport update from 'immutability-helper';\nimport { API_KEY_CREATE, API_KEY_DELETE, API_KEY_UPDATE, API_KEYS_2FA_MODAL, API_KEYS_DATA } from './constants';\nexport var initialApiKeysState = {\n  apiKeys: [],\n  dataLoaded: false,\n  modal: {\n    active: false\n  }\n};\nexport var apiKeysReducer = function apiKeysReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialApiKeysState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case API_KEYS_DATA:\n      return _objectSpread({}, state, {\n        apiKeys: action.payload,\n        dataLoaded: true\n      });\n\n    case API_KEY_CREATE:\n      return _objectSpread({}, state, {\n        apiKeys: state.apiKeys.concat(action.payload)\n      });\n\n    case API_KEY_UPDATE:\n      var apiKeyIndex = state.apiKeys.findIndex(function (e) {\n        return e.kid === action.payload.kid;\n      });\n      var apiKeys = update(state.apiKeys, _defineProperty({}, apiKeyIndex, {\n        state: {\n          $set: action.payload.state\n        },\n        updated_at: {\n          $set: action.payload.updated_at\n        }\n      }));\n      return _objectSpread({}, state, {\n        apiKeys: apiKeys\n      });\n\n    case API_KEY_DELETE:\n      return _objectSpread({}, state, {\n        apiKeys: state.apiKeys.filter(function (apiKey) {\n          return apiKey.kid !== action.payload.kid;\n        })\n      });\n\n    case API_KEYS_2FA_MODAL:\n      return _objectSpread({}, state, {\n        modal: action.payload\n      });\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/workspaces/codespaces-blank/baseapp-master/src/modules/user/apiKeys/reducer.ts"],"names":["update","API_KEY_CREATE","API_KEY_DELETE","API_KEY_UPDATE","API_KEYS_2FA_MODAL","API_KEYS_DATA","initialApiKeysState","apiKeys","dataLoaded","modal","active","apiKeysReducer","state","action","type","payload","concat","apiKeyIndex","findIndex","e","kid","$set","updated_at","filter","apiKey"],"mappings":";;;;;;AAAA,OAAOA,MAAP,MAAmB,qBAAnB;AAWA,SACIC,cADJ,EACoBC,cADpB,EACoCC,cADpC,EAEIC,kBAFJ,EAGIC,aAHJ,QAIO,aAJP;AAkBA,OAAO,IAAMC,mBAAiC,GAAG;AAC7CC,EAAAA,OAAO,EAAE,EADoC;AAE7CC,EAAAA,UAAU,EAAE,KAFiC;AAG7CC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAE;AADL;AAHsC,CAA1C;AAkBP,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAsE;AAAA,MAArEC,KAAqE,uEAA7DN,mBAA6D;AAAA,MAAxCO,MAAwC;;AAChG,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKT,aAAL;AACI,+BACOO,KADP;AAEIL,QAAAA,OAAO,EAAEM,MAAM,CAACE,OAFpB;AAGIP,QAAAA,UAAU,EAAE;AAHhB;;AAKJ,SAAKP,cAAL;AACI,+BACOW,KADP;AAEIL,QAAAA,OAAO,EAAEK,KAAK,CAACL,OAAN,CAAcS,MAAd,CAAqBH,MAAM,CAACE,OAA5B;AAFb;;AAIJ,SAAKZ,cAAL;AACI,UAAMc,WAAW,GAAGL,KAAK,CAACL,OAAN,CAAcW,SAAd,CAAwB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,GAAF,KAAUP,MAAM,CAACE,OAAP,CAAeK,GAA7B;AAAA,OAAzB,CAApB;AACA,UAAMb,OAAO,GAAGP,MAAM,CAACY,KAAK,CAACL,OAAP,sBACjBU,WADiB,EACH;AACXL,QAAAA,KAAK,EAAE;AAACS,UAAAA,IAAI,EAAER,MAAM,CAACE,OAAP,CAAeH;AAAtB,SADI;AAEXU,QAAAA,UAAU,EAAE;AAACD,UAAAA,IAAI,EAAER,MAAM,CAACE,OAAP,CAAeO;AAAtB;AAFD,OADG,EAAtB;AAMA,+BACOV,KADP;AAEIL,QAAAA,OAAO,EAAPA;AAFJ;;AAIJ,SAAKL,cAAL;AACI,+BACOU,KADP;AAEIL,QAAAA,OAAO,EAAEK,KAAK,CAACL,OAAN,CAAcgB,MAAd,CAAqB,UAAAC,MAAM;AAAA,iBAAIA,MAAM,CAACJ,GAAP,KAAeP,MAAM,CAACE,OAAP,CAAeK,GAAlC;AAAA,SAA3B;AAFb;;AAIJ,SAAKhB,kBAAL;AACI,+BACOQ,KADP;AAEIH,QAAAA,KAAK,EAAEI,MAAM,CAACE;AAFlB;;AAIJ;AACI,aAAOH,KAAP;AAnCR;AAqCH,CAtCM","sourcesContent":["import update from 'immutability-helper';\nimport {\n    ApiKeyCreateData,\n    ApiKeyCreateFetch,\n    ApiKeyDataInterface,\n    ApiKeyDelete,\n    ApiKeyDeleteFetch,\n    ApiKeys2FAModal,\n    ApiKeysData,\n    ApiKeysFetch, ApiKeyUpdate, ApiKeyUpdateFetch,\n} from './actions';\nimport {\n    API_KEY_CREATE, API_KEY_DELETE, API_KEY_UPDATE,\n    API_KEYS_2FA_MODAL,\n    API_KEYS_DATA,\n} from './constants';\n\nexport interface ApiKeyStateModal {\n    active: boolean;\n    action?: 'getKeys' | 'createKey' | 'createSuccess' | 'updateKey' | 'deleteKey';\n    apiKey?: ApiKeyDataInterface;\n}\n\nexport interface ApiKeysState {\n    apiKeys: ApiKeyDataInterface[];\n    dataLoaded: boolean;\n    modal: ApiKeyStateModal;\n}\n\nexport const initialApiKeysState: ApiKeysState = {\n    apiKeys: [],\n    dataLoaded: false,\n    modal: {\n        active: false,\n    },\n};\n\nexport type ApiKeysAction = ApiKeysFetch |\n    ApiKeysData |\n    ApiKeyCreateFetch |\n    ApiKeyCreateData |\n    ApiKeyUpdateFetch |\n    ApiKeyUpdate |\n    ApiKeyDeleteFetch |\n    ApiKeyDelete |\n    ApiKeys2FAModal;\n\nexport const apiKeysReducer = (state = initialApiKeysState, action: ApiKeysAction): ApiKeysState => {\n    switch (action.type) {\n        case API_KEYS_DATA:\n            return {\n                ...state,\n                apiKeys: action.payload,\n                dataLoaded: true,\n            };\n        case API_KEY_CREATE:\n            return {\n                ...state,\n                apiKeys: state.apiKeys.concat(action.payload),\n            };\n        case API_KEY_UPDATE:\n            const apiKeyIndex = state.apiKeys.findIndex(e => e.kid === action.payload.kid);\n            const apiKeys = update(state.apiKeys, {\n                [apiKeyIndex]: {\n                    state: {$set: action.payload.state},\n                    updated_at: {$set: action.payload.updated_at},\n                },\n            });\n            return {\n                ...state,\n                apiKeys,\n            };\n        case API_KEY_DELETE:\n            return {\n                ...state,\n                apiKeys: state.apiKeys.filter(apiKey => apiKey.kid !== action.payload.kid),\n            };\n        case API_KEYS_2FA_MODAL:\n            return {\n                ...state,\n                modal: action.payload,\n            };\n        default:\n            return state;\n    }\n};\n"]},"metadata":{},"sourceType":"module"}